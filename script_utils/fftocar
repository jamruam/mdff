#!/bin/bash

echo "=========================================================="
date
echo "Running fftocar ..."
echo "This script generate POSCAR file from POSFF file"

posff=$1
poscar=$2


#        2048
#LJLARGE                                                     
#     45.755230000000      0.000000000000      0.000000000000
#      0.000000000000     45.755230000000      0.000000000000
#      0.000000000000      0.000000000000     45.755230000000
#   1
# A  
#        2048
#A    0.135457872964E+02 -0.949266478416E+01 -0.346886509282E+02 -0.230567636247E+02 -0.102395014679E+02  0.157071607280E+02  0.949537167845E+02 -0.226484438512E+03 -0.164288449813E+03
#A    0.183804155270E+02  0.105113633039E+01  0.337705926908E+02 -0.435322210241E+01  0.127914149155E+02  0.523566562663E+01  0.507125017754E+01 -0.141498284387E+03  0.118160228852E+03
#A   -0.219768743186E+02 -0.412415450760E+01 -0.973473955172E+01  0.363562262930E+01  0.102810732370E+02 -0.253690569967E+01 -0.377159281321E+03 -0.386349165731E+03  0.143610489216E+03

head -n 2 $posff | tail -n 1 >  $poscar
echo "1.00000"               >> $poscar
head -n 5 $posff | tail -n 3 >> $poscar
head -n 9 $posff | tail -n 3 >> $poscar 
awk '{ 
        if (NF==10) { printf ("%30s %30s %30s %5s \n",$2,$3,$4,$1)  }
                   }' $posff >> $poscar

echo "file $poscar generated"
echo "=========================================================="
